# åª’ä½“æ’­æ”¾å™¨æ‰©å±•ï¼ˆv1.4.1 å®Œæ•´ä¼˜åŒ–ç‰ˆï¼‰

æ·±åº¦é‡æž„ï¼Œå®‰å…¨é›†æˆå…¨åª’ä½“æ’­æ”¾èƒ½åŠ›ï¼Œèšç„¦ç¨³å®šæ€§ä¿®å¤ä¸ŽåŠŸèƒ½ä¼˜åŒ–ï¼Œä¿ç•™è€ç‰ˆæœ¬æ ¸å¿ƒäº¤äº’é€»è¾‘ï¼ŒåŒæ—¶è§£å†³æ–°ç‰ˆæœ¬æ½œåœ¨çš„è„šæœ¬å´©æºƒã€çŠ¶æ€ä¸åŒæ­¥ç­‰é—®é¢˜ï¼Œé€‚é…å¤šç³»ç»ŸçŽ¯å¢ƒã€‚

## ðŸš€ æ ¸å¿ƒåŠŸèƒ½äº®ç‚¹

### 1. å…¨åª’ä½“æ ¼å¼æ”¯æŒ
- **å›¾ç‰‡æ ¼å¼**ï¼šPNGã€JPGã€JPEGã€GIFã€BMPã€WebPã€APNG
- **è§†é¢‘æ ¼å¼**ï¼šWebMã€MP4ã€OGVã€MOVã€AVIã€MKV
- **æ™ºèƒ½è¯†åˆ«**ï¼šè‡ªåŠ¨æ£€æµ‹åª’ä½“ç±»åž‹ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®

### 2. æ’­æ”¾æŽ§åˆ¶ä¸Žæ¨¡å¼
- **æ’­æ”¾æ¨¡å¼**ï¼šéšæœºæ’­æ”¾ï¼ˆè‡ªåŠ¨è§„é¿é‡å¤åª’ä½“ï¼‰ã€é¡ºåºæ’­æ”¾ï¼ˆæ”¯æŒå¾ªçŽ¯åˆ‡æ¢ï¼‰
- **è‡ªåŠ¨åˆ‡æ¢**ï¼šAIå›žå¤æ£€æµ‹ã€çŽ©å®¶æ¶ˆæ¯æ£€æµ‹ï¼ˆä¼˜åŒ–å†·å´é€»è¾‘ï¼Œé»˜è®¤3ç§’é˜²è¯¯è§¦ï¼‰
- **çª—å£äº¤äº’**ï¼šæ‹–æ‹½ç§»åŠ¨ã€å››è¾¹å››è§’è°ƒæ•´å¤§å°ã€é”å®šåŠŸèƒ½ï¼ˆé˜²æ­¢è¯¯æ“ä½œï¼‰
- **è¿‡æ¸¡æ•ˆæžœ**ï¼šæ·¡å…¥æ·¡å‡ºã€æ»‘åŠ¨ã€ç¼©æ”¾ã€æ— æ•ˆæžœï¼ˆ4ç§å¯é€‰ï¼‰

### 3. è§†é¢‘ä¸“å±žæŽ§åˆ¶
- **è¿›åº¦ç®¡ç†**ï¼šæ‹–æ‹½è¿›åº¦æ¡å®šä½ã€åŠ è½½è¿›åº¦å¯è§†åŒ–
- **éŸ³é‡è°ƒèŠ‚**ï¼š0-100%ç²¾ç»†æŽ§åˆ¶ï¼ˆé™éŸ³/ä½ŽéŸ³é‡/é«˜éŸ³é‡å›¾æ ‡åŒºåˆ†ï¼‰
- **å¾ªçŽ¯æ’­æ”¾**ï¼šç‹¬ç«‹å¼€å…³ï¼ˆå¼€å¯åŽä¸è§¦å‘è‡ªåŠ¨åˆ‡æ¢ï¼‰
- **æŽ§åˆ¶æ è‡ªå®šä¹‰**ï¼šå¯éšè—è¿›åº¦æ¡ã€éŸ³é‡æŽ§åˆ¶ã€å¾ªçŽ¯æŒ‰é’®ã€æ—¶é—´æˆ³

### 4. åª’ä½“ç­›é€‰ä¸Žç®¡ç†
- **ä¸€é”®ç­›é€‰**ï¼šæŽ§åˆ¶æ å¿«é€Ÿåˆ‡æ¢ã€Œæ‰€æœ‰åª’ä½“/ä»…å›¾ç‰‡/ä»…è§†é¢‘ã€
- **å¤§å°é™åˆ¶**ï¼šè‡ªå®šä¹‰å›¾ç‰‡ï¼ˆ1-50MBï¼‰ã€è§†é¢‘ï¼ˆ10-500MBï¼‰æœ€å¤§å°ºå¯¸
- **æ— æ•ˆæ¸…ç†**ï¼šä¸€é”®ç§»é™¤ä¸å­˜åœ¨/è¶…é™åˆ¶çš„åª’ä½“æ–‡ä»¶

### 5. è§†è§‰ä¸Žäº¤äº’ä¼˜åŒ–
- **æ— è¾¹æ¡†æ¨¡å¼**ï¼šä»…æ˜¾ç¤ºåª’ä½“å†…å®¹ï¼Œé¼ æ ‡æ‚¬æµ®æ˜¾ç¤ºæŽ§åˆ¶æ ï¼ˆ3ç§’è‡ªåŠ¨éšè—ï¼‰
- **åª’ä½“ä¿¡æ¯æ˜¾ç¤º**ï¼šåº•éƒ¨æ˜¾ç¤ºæ–‡ä»¶åä¸Žç±»åž‹ï¼ˆå¯å¼€å…³ï¼‰
- **è‡ªé€‚åº”æ¨¡å¼**ï¼šå¡«å……æ¨¡å¼/è‡ªé€‚åº”æ¨¡å¼åˆ‡æ¢

### 6. æ€§èƒ½ä¸Žç¨³å®šæ€§
- **é¢„åŠ è½½ç­–ç•¥**ï¼šå›¾ç‰‡é»˜è®¤é¢„åŠ è½½ã€è§†é¢‘å¯é€‰é¢„åŠ è½½
- **WebSocketå®žæ—¶æ›´æ–°**ï¼šåª’ä½“åº“å˜æ›´è‡ªåŠ¨åŒæ­¥ï¼ˆæ–­è¿žåŽ10ç§’è‡ªåŠ¨é‡è¿žï¼‰
- **æœåŠ¡è½®è¯¢**ï¼šå¯è‡ªå®šä¹‰è½®è¯¢é—´éš”ï¼ˆé»˜è®¤30ç§’ï¼‰

## ðŸ“¦ å®‰è£…éƒ¨ç½²

### 1. æ‰©å±•éƒ¨ç½²
å°†æ‰©å±•æ–‡ä»¶å¤¹æ”¾å…¥ SillyTavern çš„ **`public\scripts\extensions\third-party`** ç›®å½•ï¼ˆæ— è¯¥ç›®å½•éœ€æ‰‹åŠ¨åˆ›å»ºï¼‰ã€‚

### 2. ä¾èµ–å®‰è£…
```bash
# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒï¼ˆæŽ¨èï¼‰
python -m venv venv
# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate

# å®‰è£…ä¾èµ–åŒ…
pip install -r requirements.txt
```

**ä¾èµ–æ¸…å•**ï¼š
- flask>=2.0.0,<3.0.0
- flask-cors>=3.0.10,<4.0.0
- watchdog>=2.1.6,<3.0.0ï¼ˆæ–‡ä»¶ç›‘æŽ§ï¼‰
- gevent>=23.9.1,<24.0.0ï¼ˆWebSocketæœåŠ¡ï¼‰
- gevent-websocket>=0.10.1,<1.0.0
- urllib3>=1.26.0,<2.0.0

### 3. å¯åŠ¨åª’ä½“æœåŠ¡
```bash
python image_service.py
```

**é¦–æ¬¡å¯åŠ¨é…ç½®**ï¼š
- æ‰«æç›®å½•ï¼šWindowsé»˜è®¤ä¸º `F:\Download`ï¼ŒmacOS/Linuxé»˜è®¤ä¸º `~/Downloads`
- å¤§å°é™åˆ¶ï¼šå›¾ç‰‡5MBã€è§†é¢‘100MBï¼ˆå¯åœ¨è®¾ç½®ä¸­ä¿®æ”¹ï¼‰
- æœåŠ¡éªŒè¯ï¼šè®¿é—® `http://127.0.0.1:9000/status`ï¼Œè¿”å›žã€Œactive: trueã€å³æ­£å¸¸

## ðŸŽ® ä½¿ç”¨è¯´æ˜Ž

### åŸºç¡€æ“ä½œæŒ‡å—

| åŠŸèƒ½ | æ“ä½œæ–¹å¼ | è¯´æ˜Ž |
|------|----------|------|
| çª—å£ç§»åŠ¨ | æ‹–æ‹½æ ‡é¢˜æ  | é”å®šçŠ¶æ€ä¸‹ä¸å¯ç§»åŠ¨ |
| çª—å£ç¼©æ”¾ | æ‹–æ‹½å››è¾¹å››è§’æ‰‹æŸ„ | é”å®šçŠ¶æ€ä¸‹ä¸å¯ç¼©æ”¾ |
| é”å®šçª—å£ | ç‚¹å‡»æ ‡é¢˜æ ã€Œé”ã€å›¾æ ‡ | é˜²æ­¢è¯¯æ“ä½œ |
| æ’­æ”¾/æš‚åœ | ç‚¹å‡»æŽ§åˆ¶æ ã€Œæ’­æ”¾/æš‚åœã€æŒ‰é’® | å›¾ç‰‡è§¦å‘å®šæ—¶åˆ‡æ¢ï¼Œè§†é¢‘æŽ§åˆ¶æ’­æ”¾çŠ¶æ€ |
| åˆ‡æ¢åª’ä½“ | ç‚¹å‡»ã€Œä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªã€æŒ‰é’® | è§†é¢‘ä¼šæš‚åœå½“å‰æ’­æ”¾ |
| åˆ‡æ¢æ’­æ”¾æ¨¡å¼ | ç‚¹å‡»ã€Œéšæœº/é¡ºåºã€å›¾æ ‡ | éšæœºæ¨¡å¼é‡ç½®å·²æ’­æ”¾è®°å½• |
| ç­›é€‰åª’ä½“ç±»åž‹ | æŽ§åˆ¶æ å³ä¾§ã€Œèƒ¶ç‰‡/å›¾ç‰‡/è§†é¢‘ã€å›¾æ ‡ | çŠ¶æ€åŒæ­¥åˆ°è®¾ç½®é¢æ¿ |
| æ— è¾¹æ¡†æ¨¡å¼ | æ ‡é¢˜æ ã€Œè¾¹æ¡†ã€å›¾æ ‡ | é¼ æ ‡æ‚¬æµ®æ˜¾ç¤ºæŽ§åˆ¶æ  |
| æŽ§åˆ¶æ è‡ªå®šä¹‰ | æŽ§åˆ¶æ ã€Œæ»‘å—ã€å›¾æ ‡ | è‡ªå®šä¹‰æ˜¾ç¤º/éšè—æŽ§åˆ¶é¡¹ |

### è§†é¢‘æ’­æ”¾æ³¨æ„äº‹é¡¹
- **æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾é™åˆ¶**ï¼šéœ€æ‰‹åŠ¨ç‚¹å‡»è§†é¢‘è§¦å‘é¦–æ¬¡æ’­æ”¾
- **å¤§è§†é¢‘ä¼˜åŒ–**ï¼šè¶…è¿‡200MBå»ºè®®å…³é—­ã€Œè§†é¢‘é¢„åŠ è½½ã€
- **å¾ªçŽ¯æ’­æ”¾é€»è¾‘**ï¼šå¼€å¯åŽAI/çŽ©å®¶æ¶ˆæ¯æ£€æµ‹ä¸ä¼šè§¦å‘åˆ‡æ¢
- **æ–­ç‚¹ç»­ä¼ **ï¼šåˆ·æ–°é¡µé¢åŽä»Žä¸Šæ¬¡æ’­æ”¾ä½ç½®ç»§ç»­

### é«˜çº§è®¾ç½®ï¼ˆæ‰©å±•è®¾ç½®é¢æ¿ï¼‰

1. **æœåŠ¡é…ç½®**ï¼š
   - æœåŠ¡åœ°å€ï¼šé»˜è®¤ `http://localhost:9000`
   - æ‰«æç›®å½•ï¼šæ”¯æŒä¸­æ–‡è·¯å¾„ï¼Œç‚¹å‡»ã€Œæ›´æ–°ç›®å½•ã€é‡æ–°æ‰«æ

2. **æ’­æ”¾è®¾ç½®**ï¼š
   - å®šæ—¶åˆ‡æ¢é—´éš”ï¼š1000-60000æ¯«ç§’ï¼ˆé»˜è®¤5000æ¯«ç§’ï¼‰
   - æ£€æµ‹å†·å´æ—¶é—´ï¼š1000-30000æ¯«ç§’ï¼ˆé»˜è®¤3000æ¯«ç§’ï¼‰
   - è¿‡æ¸¡æ•ˆæžœï¼š4ç§åŠ¨ç”»å¯é€‰

3. **è§†è§‰ä¸Žäº¤äº’**ï¼š
   - éšè—è¾¹æ¡†ï¼šæ— è¾¹æ¡†æ¨¡å¼å¼€å…³
   - æ˜¾ç¤ºåª’ä½“ä¿¡æ¯ï¼šåº•éƒ¨ä¿¡æ¯æ˜¾ç¤ºå¼€å…³
   - è§†é¢‘æŽ§åˆ¶æ è‡ªå®šä¹‰ï¼šæŒ‰éœ€æ˜¾ç¤ºæŽ§ä»¶

## ðŸ”§ æ•…éšœæŽ’æŸ¥

### å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

**1. æœåŠ¡è¿žæŽ¥å¤±è´¥**
- ç—‡çŠ¶ï¼šè®¾ç½®é¢æ¿æ˜¾ç¤ºã€ŒæœåŠ¡ç¦»çº¿ã€
- è§£å†³ï¼šç¡®è®¤ `image_service.py` å·²å¯åŠ¨ï¼Œæ£€æŸ¥æœåŠ¡åœ°å€ï¼Œé‡å¯æœåŠ¡

**2. è§†é¢‘åŠ è½½å¤±è´¥**
- ç—‡çŠ¶ï¼šè§†é¢‘æ˜¾ç¤ºç©ºç™½æˆ–æç¤ºã€ŒåŠ è½½å¤±è´¥ã€
- è§£å†³ï¼šæ£€æŸ¥æ–‡ä»¶è·¯å¾„ã€æ–‡ä»¶å®Œæ•´æ€§ã€æµè§ˆå™¨å…¼å®¹æ€§ã€å¤§å°é™åˆ¶

**3. è‡ªåŠ¨åˆ‡æ¢æ— æ•ˆ**
- ç—‡çŠ¶ï¼šAIå›žå¤/çŽ©å®¶æ¶ˆæ¯åŽæœªè§¦å‘åª’ä½“åˆ‡æ¢
- è§£å†³ï¼šæ£€æŸ¥æ¨¡å¼ã€å¼€å…³çŠ¶æ€ã€å†·å´æ—¶é—´ã€è§†é¢‘å¾ªçŽ¯çŠ¶æ€

**4. åª’ä½“ç­›é€‰çŠ¶æ€ä¸åŒæ­¥**
- ç—‡çŠ¶ï¼šæŽ§åˆ¶æ ç­›é€‰ä¸Žè®¾ç½®é¢æ¿çŠ¶æ€ä¸ä¸€è‡´
- è§£å†³ï¼šç‚¹å‡»ã€Œåˆ·æ–°æœåŠ¡ã€æŒ‰é’®åŒæ­¥çŠ¶æ€

**5. WebSocketè¿žæŽ¥æ–­å¼€**
- ç—‡çŠ¶ï¼šåª’ä½“åº“æ–°å¢žæ–‡ä»¶åŽæœªè‡ªåŠ¨æ›´æ–°
- è§£å†³ï¼šæœåŠ¡ä¼šè‡ªåŠ¨é‡è¿žï¼ˆæ–­è¿žåŽ10ç§’è§¦å‘ï¼‰

## ðŸŽ¯ v1.4.1 æ›´æ–°å†…å®¹

### åŠŸèƒ½ä¼˜åŒ–
- âœ… **æŽ§åˆ¶æ è‡ªå®šä¹‰è®¾ç½®æŒä¹…åŒ–**ï¼šçª—å£é‡æ–°åŠ è½½æ—¶è‡ªåŠ¨æ¢å¤è®¾ç½®
- âœ… **æ— è¾¹æ¡†æ¨¡å¼äº¤äº’åˆå§‹åŒ–**ï¼šçª—å£åŠ è½½æ—¶ç«‹å³ç”Ÿæ•ˆæŽ§åˆ¶æ è‡ªåŠ¨éšè—/æ˜¾ç¤º
- âœ… **é‡å¤æŒ‰é’®ä¿®å¤**ï¼šåˆ é™¤é‡å¤çš„æŽ§åˆ¶æ è‡ªå®šä¹‰æŒ‰é’®
- âœ… **è®¾ç½®åŒæ­¥ä¼˜åŒ–**ï¼šæ”¹è¿›UIçŠ¶æ€åŒæ­¥æœºåˆ¶

### ç¨³å®šæ€§æå‡
- âœ… **é”™è¯¯å¤„ç†å¢žå¼º**ï¼šå®Œå–„å…³é”®æ“ä½œçš„é”™è¯¯è¾¹ç•Œå¤„ç†
- âœ… **åˆå§‹åŒ–æµç¨‹ä¼˜åŒ–**ï¼šç¡®ä¿æ‰€æœ‰åŠŸèƒ½åœ¨çª—å£åŠ è½½æ—¶æ­£ç¡®åˆå§‹åŒ–
- âœ… **ä»£ç ç»“æž„æ¸…ç†**ï¼šåˆ é™¤å†—ä½™ä»£ç ï¼Œæå‡å¯ç»´æŠ¤æ€§

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

- **é¡¹ç›®åœ°å€**ï¼š[https://github.com/xs138144-sys/st_image_player.git](https://github.com/xs138144-sys/st_image_player.git)
- **ä½œè€…**ï¼šDeepSeekã€è±†åŒ…ã€åæ­»
- **ç‰ˆæœ¬**ï¼šv1.4.1ï¼ˆå®Œæ•´ä¼˜åŒ–ç‰ˆï¼‰

## ðŸ“ æ›´æ–°æ—¥å¿—

### v1.4.1
- ä¿®å¤æŽ§åˆ¶æ è‡ªå®šä¹‰è®¾ç½®æŒä¹…åŒ–é—®é¢˜
- ä¼˜åŒ–æ— è¾¹æ¡†æ¨¡å¼äº¤äº’åˆå§‹åŒ–
- åˆ é™¤é‡å¤çš„æŽ§åˆ¶æ è‡ªå®šä¹‰æŒ‰é’®
- å¢žå¼ºé”™è¯¯å¤„ç†å’Œè®¾ç½®åŒæ­¥æœºåˆ¶
- æ›´æ–°æ–‡æ¡£å’Œæ•…éšœæŽ’æŸ¥æŒ‡å—

### v1.4.0
- æ–°å¢žè§†é¢‘æŽ§åˆ¶æ è‡ªå®šä¹‰åŠŸèƒ½
- æ·»åŠ æ— è¾¹æ¡†æ¨¡å¼æ”¯æŒ
- ä¼˜åŒ–åª’ä½“ç­›é€‰çŠ¶æ€åŒæ­¥
- æ”¹è¿›è®¾ç½®é¢æ¿ç”¨æˆ·ä½“éªŒ

---

**æ³¨æ„**ï¼šæœ¬æ‰©å±•ä¸“ä¸º SillyTavern è®¾è®¡ï¼Œç¡®ä¿ä½¿ç”¨å…¼å®¹çš„ SillyTavern ç‰ˆæœ¬ä»¥èŽ·å¾—æœ€ä½³ä½“éªŒã€‚
